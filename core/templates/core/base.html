{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="Polymath — tutoriels, projets et analyses sur l'ingénierie, la robotique, la mécatronique et l'IA.">
    <!-- Open Graph / Social -->
    <meta property="og:title" content="Polymath — Média & Ingénierie">
    <meta property="og:description" content="Tutoriels, projets et analyses sur l'ingénierie, la robotique, la mécatronique et l'IA.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="./polymath_og.png">
    <meta property="og:url" content="https://ton-site.example/">
    <meta name="twitter:card" content="summary_large_image">
    <!-- Prefers color-scheme hint (utile pour JS / progressive enhancement) -->
    <meta name="color-scheme" content="light dark">
    <title>Polymath — Média & Ingénierie</title>

    <!-- Favicon (remplacer par le fichier .ico / .png optimisé) -->
    <!-- <link rel="icon" href="favicon.png" type="image/png"> -->

    <!-- Styles -->
    <link rel="stylesheet" href="{% static 'core/assets/css/style.css' %}">
</head>
<body>
    <!-- Skip link -->
    <a class="skip-link" href="#main">Aller au contenu</a>

    <header role="banner" class="site-header">
        <nav role="navigation" aria-label="Navigation principale" class="nav">
            <div class="nav-left">
                <a class="logo" href="index.html" aria-label="Accueil Polymath">
                    <img src="{% static 'core/assets/img/logo/polymath_1.png' %}" alt="Logo Polymath" class="logo-img">
                    <span class="logo-text">Polymath</span>
                </a>
            </div>

            <div class="nav-center">
                <button type="button" class="hamburger" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="primary-navigation">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>

                <div id="primary-navigation" class="navlinks" data-visible="false">
                    <ul>
                        <li><a href="{% url 'home' %}">Accueil</a></li>
                        <li><a href="#">Actu</a></li>
                        <li><a href="{% url 'blog:article_list' %}">Articles</a></li>
                        <li><a href="{% url 'projet_list' %}">Projets</a></li>
                        <li><a href="#">Live</a></li>
                        <li><a href="{% url 'forum_home' %}">Forum</a></li>
                    </ul>
                </div>
            </div>

            <div class="nav-right">
                <div class="search">
                    <input id="search" class="search-input" type="search" placeholder="Rechercher un article...">
                    <button type="submit" class="icon-btn" aria-label="Rechercher" id="search-inline-btn" title="Rechercher">
                        <!-- petit SVG loupe -->
                        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                            <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </button>
                </div>

                <button type="button" class="search-toggle icon-btn" aria-label="Ouvrir la recherche plein écran" aria-expanded="false">
                    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                        <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>

                <div class="mode-toggle" role="button" tabindex="0" aria-label="Basculer mode sombre" title="Mode sombre" aria-pressed="false">
                    <img class="moon-logo" src="{% static 'core/assets/icons/moon.svg' %}" alt="image de la lune">
                    <img class="sun-logo" src="{% static 'core/assets/icons/sun.svg' %}" alt="image du soleil">
                </div>

                {% if user.is_authenticated %}
                    <a href="{% url 'profil_detail' user.pk %}" class="icon-btn" aria-label="Mon compte">
                        {% comment %} <img src="{% static 'core/assets/icons/user.svg' %}" alt="Compte"> {% endcomment %}
                        <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zM3 21v-1a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v1" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    </a>
                {% else %}
                    <a href="{% url 'register' %}" class="cta cta-register">S'inscrire</a>

                    <a href="{% url 'login' %}" class="cta cta-login">Se connecter</a>
                {% endif %}

                {% comment %} <a class="user-btn icon-btn" href="{% if user.is_authenticated %}{% url 'profil_detail' user.pk %}{% else %}{% url 'login' %}{% endif %}" aria-label="Mon compte">
                    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                        <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zM3 21v-1a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v1" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a> {% endcomment %}
            </div>
        </nav>
        <div class="scroll-progress"></div>
    </header>

    <!-- Search overlay -->
    <div id="search-overlay" class="search-overlay" aria-hidden="true" role="dialog" aria-label="Recherche pleine page">
        <div class="search-overlay-inner">
            <button type="button" id="close-search-overlay" class="icon-btn close-btn" aria-label="Fermer la recherche">
                ✕
            </button>
            <form class="search-form" role="search" aria-label="Recherche sur le site">
                <input id="search-full" type="search" placeholder="Rechercher un article, un projet..." autocomplete="off">
                <button type="submit" class="cta">Rechercher</button>
            </form>
        </div>
    </div>

    <main id="main" role="main">
        {% block content %}
        {% endblock content %}
    </main>

    <footer role="contentinfo" class="site-footer">
        <div class="footer-grid">
            <div class="footer-about">
                <div class="footer-bottom-logo">
                    <img src="{% static 'core/assets/img/logo/polymath_8.png' %}" alt="Logo Polymath" class="footer-logo">
                    <p>Votre source d'information sur les dernières innovations en ingénierie.</p>
                </div>
                <div class="socials">
                    <a href="#" aria-label="LinkedIn">
                        <img src="{% static 'core/assets/icons/linkedin.svg' %}" alt="Linkedin logo">
                    </a>
                    <a href="#" aria-label="Twitter">
                        <img src="{% static 'core/assets/icons/twitter.svg' %}" alt="Twitter/X logo">
                    </a>
                    <a href="#" aria-label="Facebook">
                        <img src="{% static 'core/assets/icons/facebook.svg' %}" alt="Facebook logo">
                    </a>
                </div>
            </div>

            <nav class="footer-nav" aria-label="Navigation du pied de page">
                <h4>Navigation</h4>
                <ul>
                    <li><a href="#">A propos</a></li>
                    <li><a href="#">Nos services</a></li>
                    <li><a href="#">A propos</a></li>
                    <li><a href="#">Nos services</a></li>
                    <li><a href="#">Notre équipe</a></li>
                    <li><a href="#">Aérospatial</a></li>
                    <li><a href="#">Mécatronique</a></li>
                    <li><a href="#">Robotique</a></li>
                    <li><a href="#">Digitales solutions</a></li>
                    <li><a href="#">IT | Adm syst & network</a></li>
                    <li><a href="#">Intelligence artificielle</a></li>
                    <li><a href="#">Projets</a></li>
                    <li><a href="#">Archives</a></li>
                </ul>
            </nav>

            <div class="footer-legal">
                <h4>Légal & Contact</h4>
                <ul>
                    <li><a href="#">Mentions légales</a></li>
                    <li><a href="#">Confidentialité</a></li>
                    <li><a href="#">Conditions d'utilisation</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Plan du site</a></li>
                </ul>
            </div>

            <aside class="footer-cta" aria-labelledby="newsletter-title">
                <h4 id="newsletter-title">Restez informé</h4>
                <p>Abonnez-vous à la newsletter.</p>
                <form action="#" class="newsletter-form" method="post" novalidate>
                    <label for="newsletter-email" class="visually-hidden">Adresse email</label>
                    <input id="newsletter-email" type="email" placeholder="Votre email" required>
                    <button class="cta" type="submit">S'abonner</button>
                </form>
            </aside>
        </div>
         <div class="footer-bottom">
                <p>&copy; 2025 Polymath — Développé par GraviTech Software</p>
        </div>    
    </footer>

    <!-- Menu latéral mobile -->
    <aside class="mobile-menu" aria-hidden="true">
        <div class="mobile-menu-inner">
            <button type="button" class="close-mobile-menu" aria-label="Fermer le menu">
                <img src="{% static 'core/assets/icons/close.svg' %}" alt="Fermer">
            </button>
            <div class="mobile-menu-header">
                <img src="{% static 'core/assets/img/logo/polymath_logo_light.svg' %}" alt="Polymath" class="mobile-menu-logo">
            </div>

            <nav class="mobile-menu-nav">
                <ul>
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="#">Articles</a></li>
                    <li><a href="#">Projets</a></li>
                    <li><a href="#">Newsletter</a></li>
                    <li class="divider"></li>

                    <!-- Rubriques visibles uniquement sur mobile -->
                    <li class="mobile-only"><a href="#">Podcasts</a></li>
                    <li class="mobile-only"><a href="#">Vidéos</a></li>
                    <li class="mobile-only"><a href="#">Innovations</a></li>
                    <li class="mobile-only"><a href="#">Tech durable</a></li>
                </ul>
            </nav>
        </div>
    </aside>

    <!-- Overlay sombre -->
    <div class="mobile-menu-overlay"></div>

    <nav class="mobile-bottom-nav">
        <a href="index.html" class="nav-item" aria-label="Accueil">
            <img src="{% static 'core/assets/icons/home.svg' %}" alt="">
        </a>
        <button type="button" class="nav-item" aria-label="Rechercher">
            <img src="{% static 'core/assets/icons/search.svg' %}" alt="">
        </button>
        <a href="#" class="nav-item" aria-label="Mon compte">
            <img src="{% static 'core/assets/icons/user.svg' %}" alt="">
        </a>
        <button type="button" class="nav-item hamburger-mini" aria-label="Menu mobile">
            <img src="{% static 'core/assets/icons/hamburger.svg' %}" alt="">
        </button>
    </nav>

    <script src="{% static 'core/assets/js/script.js' %}" defer></script>
</body>
</html>
